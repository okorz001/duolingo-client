<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>login.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav id="nav">
    <h3 class="group-title"><a href="index.html">&#x3C; Home &#x3E;</a></h3><input class="search" placeholder="Search" type="text"><div class="list"><h3 class="group-title">Classes</h3><ul><li><a href="module-duolingo-client.DuolingoClient.html" class="className">DuolingoClient</a><ul class='methods'><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#buyItem" class="methodName">buyItem</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#buyStreakFreeze" class="methodName">buyStreakFreeze</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#getCourses" class="methodName">getCourses</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#getCourseSkills" class="methodName">getCourseSkills</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#getShopItems" class="methodName">getShopItems</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#getSkillWords" class="methodName">getSkillWords</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#getUser" class="methodName">getUser</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#login" class="methodName">login</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#logout" class="methodName">logout</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#setCurrentCourse" class="methodName">setCurrentCourse</a></li><li data-type='method'><a href="module-duolingo-client.DuolingoClient.html#translate" class="methodName">translate</a></li></ul></li></ul><h3 class="group-title">Modules</h3><ul><li><a href="module-duolingo-client.html" class="className">duolingo-client</a><ul class='methods'><li data-type='method'><a href="module-duolingo-client.html#.login" class="methodName">login</a></li></ul></li></ul><h3><a href="global.html">Global</a></h3></div>
</nav>

<div id="main">
    
        <h1 class="page-title">login.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const jsonHttpFetch = require('./json-http-fetch')

/**
 * @typedef LoginResult
 * @prop {string} jwt The JWT secret for the user.
 * @prop {integer} userId The user's id.
 */
/**
 * Gets a JWT secret for calling APIs that require authentication. This also
 * returns their user id which is needed for some API calls.
 * @param {string} username The username to login as.
 * @param {string} password The user's password.
 * @return {Promise&lt;LoginResult>} A JWT for the user and their user id.
 * @memberof! module:duolingo-client
 */
async function login(username, password) {
    const res = await jsonHttpFetch('POST',
                                    'https://www.duolingo.com/login',
                                    {},
                                    {login: username, password})
    if (!res.ok) {
        throw new Error(res.statusText)
    }
    // Authentication failure stills returns 200, but sets failure in body
    if (res.body.failure) {
        throw new Error(res.body.message)
    }
    return {
        jwt: res.headers.get('jwt'),
        userId: +res.body.user_id,
    }
}

module.exports = login
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue, 21 May 2019 15:55:47 GMT using
    <a href="https://www.npmjs.com/package/namis">Namis</a> theme.
</footer>

<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.nicescroll/3.6.0/jquery.nicescroll.min.js"></script>
<script src="scripts/namis.search.jquery.js"></script>
<script>prettyPrint();
(function($){
    $('nav').niceScroll({
        cursorwidth: 7,
        hwacceleration: true,
        cursorcolor: "#036564",
        cursorborder: "1px solid #036564"
    });

    $('html').niceScroll({
        cursorwidth: 10,
        hwacceleration: true,
        smoothscroll: true,
        cursorminheight: 32,
        enablemousewheel: true, // nicescroll can manage mouse wheel events
        enablekeyboard: true // nicescroll can manage keyboard events
        ,cursorcolor: "#033649"
    });

    $('#nav').search(['className', 'methodName']);
})(jQuery);
</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
